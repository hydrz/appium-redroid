version: "3"

services:
  redroid:
    image: redroid/redroid:11.0.0-latest
    container_name: redroid
    privileged: true
    restart: always

  appium:
    image: appium/appium:v1.22.3-p6
    container_name: appium
    restart: always
    depends_on:
      - redroid
    environment:
      - REMOTE_ADB=true
      - ANDROID_DEVICES=redroid:5555
      - REMOTE_ADB_POLLING_SEC=60
    ports:
      - 4723:4723